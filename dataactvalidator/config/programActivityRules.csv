rule_type,is_single_field,field_name,rule_text_one,rule_text_two,description,rule_label,rule_timing
car_match,FALSE,,"allocationtransferagencyidentifier, agencyidentifier, beginningperiodofavailability, endingperiodofavailability, availabilitytypecode, mainaccountcode, subaccountcode","allocation_transfer_agency, agency_identifier, beginning_period_of_availability, ending_period_of_availability, availability_type_code, main_account_code, sub_account_code",TAS fields must match CARS file,A1_B,multi_field
IN_SET,TRUE,bydirectreimbursablefundingsource,"R,D",,Indicator must be R or D,B12_3,file_validation
SUM_FIELDS,FALSE,,ObligationsUndeliveredOrdersUnpaidTotal_FYB ,USSGL480100_UndeliveredOrdersObligationsUnpaid_FYB,ObligationsUndeliveredOrdersUnpaidTotal (FYB or CPE) = USSGL(4801 + 4831 + 4871 + 4881). This applies to the program activity and object class level.,B3,multi_field
SUM_FIELDS,FALSE,,ObligationsDeliveredOrdersUnpaidTotal_FYB,USSGL490100_DeliveredOrdersObligationsUnpaid_FYB,ObligationsDeliveredOrdersUnpaidTotal (FYB or CPE) = USSGL(4901 + 4931 + 4971 + 4981). This applies to the program activity and object class level.,B4,multi_field
SUM_FIELDS,FALSE,,GrossOutlayAmountByProgramObjectClass_FYB,"GrossOutlaysUndeliveredOrdersPrepaidTotal_FYB,  GrossOutlaysDeliveredOrdersPaidTotal_FYB","GrossOutlayAmountByProgramObjectClass (FYB or CPE, File B) = GrossOutlaysUndeliveredOrdersPrepaidTotal (FYB or CPE, File B) + GrossOutlaysDeliveredOrdersPaidTotal (FYB or CPE, File B)",B5,multi_field
SUM_FIELDS,FALSE,,GrossOutlaysUndeliveredOrdersPrepaidTotal_FYB,USSGL480200_UndeliveredOrdersObligationsPrepaidAdvanced_FYB,GrossOutlaysUndeliveredOrdersPrepaidTotal (FYB or CPE) = USSGL(4802 + 4832 + 4872+ 4882). This applies to the program activity and object class level.,B6,multi_field
SUM_FIELDS,FALSE,,GrossOutlaysDeliveredOrdersPaidTotal_FYB,USSGL490800_AuthorityOutlayedNotYetDisbursed_FYB,GrossOutlaysDeliveredOrdersPaidTotal (FYB or CPE)= USSGL(4902 + 4908 + 4972 + 4982). This applies to the program activity and object class level.,B7,multi_field
SUM_FIELDS,FALSE,,ObligationsUndeliveredOrdersUnpaidTotal_CPE,"USSGL480100_UndeliveredOrdersObligationsUnpaid_CPE, USSGL483100_UndeliveredOrdersObligationsTransferredUnpaid_CPE, USSGL487100_DownwardAdjustmentsOfPriorYearUnpaidUndeliveredOrdersObligationsRecoveries_CPE, USSGL488100_UpwardAdjustmentsOfPriorYearUndeliveredOrdersObligationsUnpaid_CPE",ObligationsUndeliveredOrdersUnpaidTotal (FYB or CPE) = USSGL(4801 + 4831 + 4871 + 4881). This applies to the program activity and object class level.,B3_2,multi_field
SUM_FIELDS,FALSE,,ObligationsDeliveredOrdersUnpaidTotal_CPE,"USSGL490100_DeliveredOrdersObligationsUnpaid_CPE,  USSGL493100_DeliveredOrdersObligationsTransferredUnpaid_CPE, ussgl497100_downwardadjustmentsofprioryearunpaiddeliveredordersobligationsrecoveries_cpe, USSGL498100_UpwardAdjustmentsOfPriorYearDeliveredOrdersObligationsUnpaid_CPE",ObligationsDeliveredOrdersUnpaidTotal (FYB or CPE) = USSGL(4901 + 4931 + 4971 + 4981). This applies to the program activity and object class level.,B4_2,multi_field
SUM_FIELDS,FALSE,,GrossOutlayAmountByProgramObjectClass_CPE,"GrossOutlaysUndeliveredOrdersPrepaidTotal_CPE,  GrossOutlaysDeliveredOrdersPaidTotal_CPE","GrossOutlayAmountByProgramObjectClass (FYB or CPE, File B) = GrossOutlaysUndeliveredOrdersPrepaidTotal (FYB or CPE, File B) + GrossOutlaysDeliveredOrdersPaidTotal (FYB or CPE, File B)",B5_2,multi_field
SUM_FIELDS,FALSE,,GrossOutlaysUndeliveredOrdersPrepaidTotal_CPE,"USSGL480200_UndeliveredOrdersObligationsPrepaidAdvanced_CPE, USSGL483200_UndeliveredOrdersObligationsTransferredPrepaidAdvanced_CPE, USSGL487200_DownwardAdjustmentsOfPriorYearPrepaidAdvancedUndeliveredOrdersObligationsRefundsCollected_CPE, USSGL488200_UpwardAdjustmentsOfPriorYearUndeliveredOrdersObligationsPrepaidAdvanced_CPE",GrossOutlaysUndeliveredOrdersPrepaidTotal (FYB or CPE) = USSGL(4802 + 4832 + 4872+ 4882). This applies to the program activity and object class level.,B6_2,multi_field
SUM_FIELDS,FALSE,,GrossOutlaysDeliveredOrdersPaidTotal_CPE,"USSGL490200_DeliveredOrdersObligationsPaid_CPE, USSGL490800_AuthorityOutlayedNotYetDisbursed_CPE, USSGL497200_DownwardAdjustmentsOfPriorYearPaidDeliveredOrdersObligationsRefundsCollected_CPE, USSGL498200_UpwardAdjustmentsOfPriorYearDeliveredOrdersObligationsPaid_CPE",GrossOutlaysDeliveredOrdersPaidTotal (FYB or CPE)= USSGL(4902 + 4908 + 4972 + 4982). This applies to the program activity and object class level.,B7_2,multi_field
SUM_FIELDS,FALSE,,DeobligationsRecoveriesRefundsdOfPriorYearByProgramObjectClass_CPE,"USSGL487100_DownwardAdjustmentsOfPriorYearUnpaidUndeliveredOrdersObligationsRecoveries_CPE, USSGL487200_DownwardAdjustmentsOfPriorYearPrepaidAdvancedUndeliveredOrdersObligationsRefundsCollected_CPE, USSGL497100_DownwardAdjustmentsOfPriorYearUnpaidDeliveredOrdersObligationsRecoveries_CPE,  USSGL497200_DownwardAdjustmentsOfPriorYearPaidDeliveredOrdersObligationsRefundsCollected_CPE",DeobligationsRecoveriesRefundsdOfPriorYearByProgramObjectClass_CPE = USSGL(4871+ 4872 + 4971 + 4972),B13,multi_field
EXISTS_IN_TABLE,TRUE,AllocationTransferAgencyIdentifier,"CGAC, cgac_code",3,Check that this is a valid agency code,A20_B,file_validation
EXISTS_IN_TABLE,TRUE,AgencyIdentifier,"CGAC, cgac_code",3,Check that this is a valid agency code,A20_B2,file_validation
REQUIRED_CONDITIONAL,TRUE,ByDirectReimbursableFundingSource,B12_2,,"Reimbursable flag indicator is required when reporting obligation or outlay USSGL account balances (excluding downward adjustments SGL accounts). Valid values are ""R"" for ""ReimbursableFundingSource"" and ""D"" for ""DirectFundingSource"".",B12,file_validation
REQUIRE_ONE_OF_SET,FALSE,,"ussgl480100_undeliveredordersobligationsunpaid_fyb, ussgl480100_undeliveredordersobligationsunpaid_cpe, ussgl483100_undeliveredordersobligationstransferredunpaid_cpe, ussgl488100_upwardadjustmentsofprioryearundeliveredordersobligationsunpaid_cpe, ussgl490100_deliveredordersobligationsunpaid_fyb, ussgl490100_deliveredordersobligationsunpaid_cpe, ussgl493100_deliveredordersobligationstransferredunpaid_cpe, ussgl498100_upwardadjustmentsofprioryeardeliveredordersobligationsunpaid_cpe, ussgl480200_undeliveredordersobligationsprepaidadvanced_fyb, ussgl480200_undeliveredordersobligationsprepaidadvanced_cpe, ussgl483200_undeliveredordersobligationstransferredprepaidadvanced_cpe, ussgl488200_upwardadjustmentsofprioryearundeliveredordersobligationsprepaidadvanced_cpe, ussgl490200_deliveredordersobligationspaid_cpe, ussgl490800_authorityoutlayednotyetdisbursed_fyb, ussgl490800_authorityoutlayednotyetdisbursed_cpe, ussgl498200_upwardadjustmentsofprioryeardeliveredordersobligationspaid_cpe",,"True if at least one of these fields is populated, used to make ByDirectReimbursableFundingSource required",B12_2,prerequisite
REQUIRED_SET_CONDITIONAL,FALSE,,A16_B2,"ussgl480100_undeliveredordersobligationsunpaid_fyb, obligationsundeliveredordersunpaidtotal_fyb, ussgl490100_deliveredordersobligationsunpaid_fyb, obligationsdeliveredordersunpaidtotal_fyb, ussgl480200_undeliveredordersobligationsprepaidadvanced_fyb, grossoutlaysundeliveredordersprepaidtotal_fyb, ussgl490800_authorityoutlayednotyetdisbursed_fyb, grossoutlaysdeliveredorderspaidtotal_fyb, grossoutlayamountbyprogramobjectclass_fyb",FYB fields are required if reporting period end date is within Q1,A16_B,prerequisite
EXISTS_IN_TABLE,TRUE,ObjectClass,"ObjectClass, object_class_code",,"Must be valid 3-digit object class as defined in OMB Circular A-11 Section 83.6, or a 4-digit code which includes a 1-digit prefix that distinguishes direct, reimbursable, and allocation obligations. Do not include decimal points when reporting in the Schema.",B11,file_validation
MIN_LENGTH,TRUE,ObjectClass,4,,"Checks if object class is 4 digits, if so will check consistency with direct reimbursable flag",B11_2,prerequisite
CHECK_PREFIX,TRUE,ObjectClass,ByDirectReimbursableFundingSource,"{""1"":""D"",""2"":""R""}",Check that 1 digit prefix is consistent with value for ByDirectReimbursableFundingSource,B11_3,prerequisite
RULE_IF,TRUE,ObjectClass,B11_3,B11_2,"If object class is 4 digits, check that 1 digit prefix is consistent with value for ByDirectReimbursableFundingSource",B11_4,file_validation
SET_EXISTS_IN_TABLE,FALSE,,ProgramActivity,"{""beginningperiodofavailability"":{""target_field"":""budget_year"",""skip_if_below"":2016}, ""agencyidentifier"":{""target_field"":""agency_id"",""pad_to_length"":3}, ""allocationtransferagencyidentifier"":{""target_field"":""allocation_transfer_id"",""pad_to_length"":3},""mainaccountcode"":{""target_field"":""account_number"",""pad_to_length"":4},""programactivitycode"":{""target_field"":""program_activity_code"",""pad_to_length"":4,""skip_if_blank"":true},""programactivityname"":{""target_field"":""program_activity_name"",""skip_if_blank"":true}}",Must be a valid program activity name and code for the corresponding TAS/TAFS as defined in Section 82 of OMB Circular A-11.,B9,multi_field
