""" Subaward indexes

Revision ID: e20b5ff45deb
Revises: 48fbbea5de34
Create Date: 2023-08-30 17:57:15.261864

"""

# revision identifiers, used by Alembic.
revision = 'e20b5ff45deb'
down_revision = '48fbbea5de34'
branch_labels = None
depends_on = None

from alembic import op
import sqlalchemy as sa
from sqlalchemy.dialects import postgresql

def upgrade(engine_name):
    globals()["upgrade_%s" % engine_name]()


def downgrade(engine_name):
    globals()["downgrade_%s" % engine_name]()





def upgrade_data_broker():
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_index('ix_dap_piid_upp_trans', 'detached_award_procurement', [sa.text("UPPER(TRANSLATE(piid, '-', ''))")], unique=False)
    op.create_index('ix_dap_pai_upp_trans', 'detached_award_procurement', [sa.text("UPPER(TRANSLATE(parent_award_id, '-', ''))")], unique=False)

    op.create_index('ix_fsrs_proc_cont_numb_upp_trans', 'fsrs_procurement', [sa.text("UPPER(TRANSLATE(contract_number, '-', ''))")], unique=False)
    op.create_index('ix_fsrs_proc_idv_ref_upp_trans', 'fsrs_procurement', [sa.text("UPPER(TRANSLATE(idv_reference_number, '-', ''))")], unique=False)

    op.create_index('ix_fsrs_sproc_comp_add_country_upp', 'fsrs_subcontract', [sa.text("UPPER(company_address_country)")], unique=False)
    op.create_index('ix_fsrs_sproc_prin_add_country_upp', 'fsrs_subcontract', [sa.text("UPPER(principle_place_country)")], unique=False)

    op.create_index('ix_pfabs_fain_upp_trans', 'published_fabs', [sa.text("UPPER(TRANSLATE(fain, '-', ''))")], unique=False)
    op.create_index('ix_pfabs_sub_code_coal_upp', 'published_fabs', [sa.text("COALESCE(UPPER(awarding_sub_tier_agency_c), '')")], unique=False)

    op.create_index('ix_fsrs_grant_fain_upp_trans', 'fsrs_grant', [sa.text("UPPER(TRANSLATE(fain, '-', ''))")], unique=False)
    op.create_index('ix_fsrs_grant_fed_agen_coal_upp', 'fsrs_grant', [sa.text("COALESCE(UPPER(federal_agency_id), '')")], unique=False)
    op.create_index('ix_fsrs_grant_award_add_upp', 'fsrs_grant', [sa.text("UPPER(awardee_address_country)")], unique=False)
    op.create_index('ix_fsrs_grant_princ_add_upp', 'fsrs_grant', [sa.text("UPPER(principle_place_country)")], unique=False)

    op.create_index('ix_fsrs_sgrant_award_add_upp', 'fsrs_subgrant', [sa.text("UPPER(awardee_address_country)")], unique=False)
    op.create_index('ix_fsrs_sgrant_princ_add_upp', 'fsrs_subgrant', [sa.text("UPPER(principle_place_country)")], unique=False)

    op.create_index('ix_sam_activation_desc', 'sam_recipient', [sa.text("activation_date DESC")], unique=False)

    op.create_index('ix_country_code_upp', 'country_code', [sa.text("UPPER(country_code)")], unique=False)
    op.create_index('ix_country_code2_upp', 'country_code', [sa.text("UPPER(country_code_2_char)")], unique=False)

    # ### end Alembic commands ###


def downgrade_data_broker():
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_index('ix_country_code2_upp', table_name='country_code')
    op.drop_index('ix_country_code_upp', table_name='country_code')

    op.drop_index('ix_sam_activation_desc', table_name='sam_recipient')

    op.drop_index('ix_fsrs_sgrant_princ_add_upp', table_name='fsrs_subgrant')
    op.drop_index('ix_fsrs_sgrant_award_add_upp', table_name='fsrs_subgrant')

    op.drop_index('ix_fsrs_grant_princ_add_upp', table_name='fsrs_grant')
    op.drop_index('ix_fsrs_grant_award_add_upp', table_name='fsrs_grant')
    op.drop_index('ix_fsrs_grant_fed_agen_coal_upp', table_name='fsrs_grant')
    op.drop_index('ix_fsrs_grant_fain_upp_trans', table_name='fsrs_grant')

    op.drop_index('ix_pfabs_sub_code_coal_upp', table_name='published_fabs')
    op.drop_index('ix_pfabs_fain_upp_trans', table_name='published_fabs')

    op.drop_index('ix_fsrs_sproc_prin_add_country_upp', table_name='fsrs_subcontract')
    op.drop_index('ix_fsrs_sproc_comp_add_country_upp', table_name='fsrs_subcontract')

    op.drop_index('ix_fsrs_proc_idv_ref_upp_trans', table_name='fsrs_procurement')
    op.drop_index('ix_fsrs_proc_cont_numb_upp_trans', table_name='fsrs_procurement')

    op.drop_index('ix_dap_pai_upp_trans', table_name='detached_award_procurement')
    op.drop_index('ix_dap_piid_upp_trans', table_name='detached_award_procurement')
    # ### end Alembic commands ###

